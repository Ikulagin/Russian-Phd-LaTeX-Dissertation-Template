val a = new Array[Long](d);
val M = Place.places();
...
for (i in 0..(r - 1)) {
    for (j in M) {
        at (j) {
           f(a);
        }
   }
}